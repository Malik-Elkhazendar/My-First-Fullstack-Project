<div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden" style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
  <div class="layout-container flex h-full grow flex-col">
    <div class="gap-1 px-6 flex flex-1 justify-center py-5">
      
      <!-- Sidebar Navigation -->
      <div class="layout-content-container flex flex-col w-80">
        <div class="flex h-full min-h-[700px] flex-col justify-between bg-white p-4">
          <div class="flex flex-col gap-4">
            <h1 class="text-[#171512] text-base font-medium leading-normal">Admin Panel</h1>
            <div class="flex flex-col gap-2">
              <a *ngFor="let item of navigationItems" 
                 [routerLink]="item.route"
                 routerLinkActive="active"
                 class="flex items-center gap-3 px-3 py-2 cursor-pointer transition-colors rounded-full hover:bg-[#f4f3f1]"
                 [class.bg-[#f4f3f1]]="item.active">
                <div class="text-[#171512]" [attr.data-icon]="item.icon" data-size="24px" [attr.data-weight]="item.active ? 'fill' : 'regular'">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                    <path [attr.d]="getIconSvg(item.icon)"></path>
                  </svg>
                </div>
                <p class="text-[#171512] text-sm font-medium leading-normal">{{ item.label }}</p>
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Content -->
      <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
        
        <!-- Header -->
        <div class="flex flex-wrap justify-between gap-3 p-4">
          <p class="text-[#171512] tracking-light text-[32px] font-bold leading-tight min-w-72">Products</p>
          <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-8 px-4 bg-[#f4f3f1] text-[#171512] text-sm font-medium leading-normal" (click)="onAddProduct()">
            <span class="truncate">Add Product</span>
          </button>
        </div>
        
        <!-- Search -->
        <div class="px-4 py-3">
          <label class="flex flex-col min-w-40 h-12 w-full">
            <div class="flex w-full flex-1 items-stretch rounded-xl h-full">
              <div class="text-[#837b67] flex border-none bg-[#f4f3f1] items-center justify-center pl-4 rounded-l-xl border-r-0" data-icon="MagnifyingGlass" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
                </svg>
              </div>
              <input placeholder="Search products" [(ngModel)]="searchTerm" (input)="onSearch()" class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#171512] focus:outline-0 focus:ring-0 border-none bg-[#f4f3f1] focus:border-none h-full placeholder:text-[#837b67] px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal" />
            </div>
          </label>
        </div>
        
        <!-- Filter Buttons -->
        <div class="flex gap-3 p-3 flex-wrap pr-4">
          <button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-[#f4f3f1] pl-4 pr-2" (click)="onCategoryChange('')">
            <p class="text-[#171512] text-sm font-medium leading-normal">All Categories</p>
            <div class="text-[#171512]" data-icon="CaretDown" data-size="20px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
              </svg>
            </div>
          </button>
          <button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-[#f4f3f1] pl-4 pr-2" (click)="filterByStatus(true)">
            <p class="text-[#171512] text-sm font-medium leading-normal">Active</p>
            <div class="text-[#171512]" data-icon="CaretDown" data-size="20px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
              </svg>
            </div>
          </button>
          <button class="flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-full bg-[#f4f3f1] pl-4 pr-2" (click)="filterByStatus(false)">
            <p class="text-[#171512] text-sm font-medium leading-normal">Inactive</p>
            <div class="text-[#171512]" data-icon="CaretDown" data-size="20px" data-weight="regular">
              <svg xmlns="http://www.w3.org/2000/svg" width="20px" height="20px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path>
              </svg>
            </div>
          </button>
        </div>
        
        <!-- Loading State -->
        <div *ngIf="loading && filteredProducts.length === 0" class="flex justify-center items-center py-20">
          <div class="loading-spinner animate-spin rounded-full h-12 w-12 border-b-2"></div>
        </div>
        
        <!-- Products Table -->
        <div class="px-4 py-3 @container" *ngIf="!loading || filteredProducts.length > 0">
          <div class="flex overflow-hidden rounded-xl border border-[#e4e2dd] bg-white">
            <table class="flex-1">
              <thead>
                <tr class="bg-white">
                  <th class="table-column-image px-4 py-3 text-left text-[#171512] w-14 text-sm font-medium leading-normal">Image</th>
                  <th class="table-column-name px-4 py-3 text-left text-[#171512] w-[400px] text-sm font-medium leading-normal">Name</th>
                  <th class="table-column-category px-4 py-3 text-left text-[#171512] w-[400px] text-sm font-medium leading-normal">Category</th>
                  <th class="table-column-price px-4 py-3 text-left text-[#171512] w-[400px] text-sm font-medium leading-normal">Price</th>
                  <th class="table-column-stock px-4 py-3 text-left text-[#171512] w-[400px] text-sm font-medium leading-normal">Stock</th>
                  <th class="table-column-status px-4 py-3 text-left text-[#171512] w-60 text-sm font-medium leading-normal">Status</th>
                  <th class="table-column-actions px-4 py-3 text-left text-[#171512] w-60 text-[#837b67] text-sm font-medium leading-normal">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let product of filteredProducts; trackBy: trackByProductId" class="border-t border-t-[#e4e2dd]">
                  <td class="table-column-image h-[72px] px-4 py-2 w-14 text-sm font-normal leading-normal">
                    <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full w-10" [style.background-image]="'url(' + product.imageUrl + ')'"></div>
                  </td>
                  <td class="table-column-name h-[72px] px-4 py-2 w-[400px] text-[#171512] text-sm font-normal leading-normal">
                    {{ product.name }}
                  </td>
                  <td class="table-column-category h-[72px] px-4 py-2 w-[400px] text-[#837b67] text-sm font-normal leading-normal">
                    {{ product.category }}
                  </td>
                  <td class="table-column-price h-[72px] px-4 py-2 w-[400px] text-[#837b67] text-sm font-normal leading-normal">
                    {{ formatPrice(product.price) }}
                  </td>
                  <td class="table-column-stock h-[72px] px-4 py-2 w-[400px] text-[#837b67] text-sm font-normal leading-normal">
                    {{ product.stock || 0 }}
                  </td>
                  <td class="table-column-status h-[72px] px-4 py-2 w-60 text-sm font-normal leading-normal">
                    <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-8 px-4 bg-[#f4f3f1] text-[#171512] text-sm font-medium leading-normal w-full" (click)="onToggleStatus(product)">
                      <span class="truncate">{{ product.isActive ? 'Active' : 'Inactive' }}</span>
                    </button>
                  </td>
                  <td class="table-column-actions h-[72px] px-4 py-2 w-60 text-[#837b67] text-sm font-bold leading-normal tracking-[0.015em]">
                    <button (click)="onEditProduct(product)" class="text-[#837b67] hover:text-[#171512] transition-colors">Edit</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <!-- Responsive Table Styles -->
          <style>
            @container(max-width:56px){.table-column-image{display: none;}}
            @container(max-width:176px){.table-column-name{display: none;}}
            @container(max-width:296px){.table-column-category{display: none;}}
            @container(max-width:416px){.table-column-price{display: none;}}
            @container(max-width:536px){.table-column-stock{display: none;}}
            @container(max-width:656px){.table-column-status{display: none;}}
            @container(max-width:776px){.table-column-actions{display: none;}}
          </style>
        </div>
          
        <!-- Empty State -->
        <div *ngIf="!loading && filteredProducts.length === 0" class="flex flex-col items-center justify-center py-20 text-center">
          <div class="text-[#837b67] mb-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="64px" height="64px" fill="currentColor" viewBox="0 0 256 256">
              <path d="M223.68,66.15,135.68,18a15.88,15.88,0,0,0-15.36,0l-88,48.17a16,16,0,0,0-8.32,14v95.64a16,16,0,0,0,8.32,14l88,48.17a15.88,15.88,0,0,0,15.36,0l88-48.17a16,16,0,0,0,8.32-14V80.18A16,16,0,0,0,223.68,66.15ZM128,32l80.34,44-29.77,16.3-80.35-44ZM128,120,47.66,76l33.9-18.56,80.34,44ZM40,90l80,43.78v85.79L40,175.82Zm176,85.78h0l-80,43.79V133.82l32-17.51V152a8,8,0,0,0,16,0V107.55L216,90v85.77Z"></path>
            </svg>
          </div>
          <h3 class="text-[#171512] text-xl font-semibold mb-2">No products found</h3>
          <p class="text-[#837b67] mb-4">{{ searchTerm || selectedCategory ? 'Try adjusting your filters' : 'Start by adding your first product' }}</p>
          <button class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-8 px-4 bg-[#f4f3f1] text-[#171512] text-sm font-medium leading-normal" (click)="onAddProduct()">
            <span class="truncate">Add Product</span>
          </button>
        </div>

      </div>
    </div>
  </div>
</div> 