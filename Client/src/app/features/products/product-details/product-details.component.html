<div class="px-4 md:px-40 flex flex-1 justify-center py-5 bg-[#fcf8f8] min-h-screen">
  <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
    <!-- Breadcrumbs -->
    <div class="flex flex-wrap gap-2 p-4">
      <a class="text-[#994d51] text-base font-medium leading-normal hover:text-[#1b0e0e] transition-colors" routerLink="/">Home</a>
      <span class="text-[#994d51] text-base font-medium leading-normal">/</span>
      <a class="text-[#994d51] text-base font-medium leading-normal hover:text-[#1b0e0e] transition-colors" routerLink="/products">Products</a>
      <span class="text-[#994d51] text-base font-medium leading-normal">/</span>
      <span class="text-[#1b0e0e] text-base font-medium leading-normal">{{ product?.name || 'Product Details' }}</span>
    </div>

  <!-- Loading State -->
    <div *ngIf="loading" class="flex justify-center items-center py-20">
      <mat-progress-spinner diameter="50" mode="indeterminate"></mat-progress-spinner>
  </div>

  <!-- Error State -->
    <div *ngIf="error && !loading" class="flex flex-col items-center justify-center py-20 text-center">
      <mat-icon class="text-[#994d51] mb-4" style="font-size: 48px; width: 48px; height: 48px;">error_outline</mat-icon>
      <h3 class="text-[#1b0e0e] text-xl font-semibold mb-2">Product not found</h3>
      <p class="text-[#994d51] mb-4">{{ error }}</p>
      <button class="bg-[#e92932] text-white px-6 py-2 rounded-lg hover:bg-[#d41e2a] transition-colors" routerLink="/products">
        Back to Products
    </button>
  </div>

    <!-- Product Details -->
    <div *ngIf="product && !loading && !error" class="grid grid-cols-1 md:grid-cols-2 gap-8 p-4">
      <!-- Product Image -->
      <div class="aspect-square bg-center bg-no-repeat bg-cover rounded-lg"
           [style.background-image]="'url(' + getImageUrl(product.imageUrl) + ')'">
      </div>

      <!-- Product Info -->
      <div class="flex flex-col gap-6">
        <div>
          <h1 class="text-[#1b0e0e] text-3xl font-bold leading-tight mb-2">{{ product.name }}</h1>
          <p class="text-[#994d51] text-base leading-normal">{{ product.description }}</p>
        </div>

        <!-- Price -->
        <div class="flex items-center gap-3">
          <span class="text-[#1b0e0e] text-2xl font-bold">${{ formatPrice(product.price) }}</span>
          <span *ngIf="product.originalPrice && product.originalPrice > product.price" 
                class="text-[#994d51] text-lg line-through">${{ formatPrice(product.originalPrice) }}</span>
          <span *ngIf="product.originalPrice && product.originalPrice > product.price"
                class="bg-[#e92932] text-white text-sm px-2 py-1 rounded">
            SALE
          </span>
        </div>

        <!-- Rating -->
        <div class="flex items-center gap-2">
          <div class="flex">
            <svg *ngFor="let star of [1,2,3,4,5]" 
                 xmlns="http://www.w3.org/2000/svg" 
                 width="20px" height="20px" 
                 [attr.fill]="star <= product.rating ? '#fbbf24' : '#e5e7eb'" 
                 viewBox="0 0 256 256">
              <path d="M234.5,114.38l-45.1,39.36,13.51,58.6a16,16,0,0,1-23.84,17.34l-51.11-31-51,31a16,16,0,0,1-23.84-17.34L66.61,153.8,21.5,114.38a16,16,0,0,1,9.11-28.06l59.46-5.15,23.21-55.36a15.95,15.95,0,0,1,29.44,0L165.93,81.17l59.46,5.15A16,16,0,0,1,234.5,114.38Z"></path>
            </svg>
          </div>
          <span class="text-[#994d51] text-base">({{ product.rating }} out of 5)</span>
        </div>

        <!-- Stock Status -->
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full" [class.bg-green-500]="product.inStock" [class.bg-red-500]="!product.inStock"></div>
          <span class="text-[#1b0e0e] font-medium">{{ product.inStock ? 'In Stock' : 'Out of Stock' }}</span>
        </div>

        <!-- Add to Cart Section -->
        <div class="bg-white rounded-xl border border-[#e4e2dd] p-6">
          <h3 class="text-[#171512] text-[22px] font-bold leading-tight tracking-[-0.015em] pb-3">Add to cart</h3>

          <!-- Quantity Selector -->
          <div class="flex max-w-[480px] flex-wrap items-end gap-4 py-3">
            <label class="flex flex-col min-w-40 flex-1">
              <span class="text-[#171512] text-sm font-medium mb-2">Quantity</span>
              <select
                [(ngModel)]="selectedQuantity"
                class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-xl text-[#171512] focus:outline-0 focus:ring-0 border border-[#e4e2dd] bg-white focus:border-[#837b67] h-14 placeholder:text-[#837b67] p-[15px] text-base font-normal leading-normal"
                [disabled]="!product.inStock">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select>
            </label>
          </div>

          <!-- Add to Cart Button -->
          <div class="flex py-3">
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 flex-1 bg-[#f3e8cc] text-[#171512] text-sm font-bold leading-normal tracking-[0.015em] hover:bg-[#f0e4c4] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              [disabled]="!product.inStock || isAddingToCart"
                    (click)="addToCart()">
              <span *ngIf="!isAddingToCart" class="truncate">Add to cart</span>
              <div *ngIf="isAddingToCart" class="flex items-center justify-center">
                <mat-progress-spinner diameter="16" mode="indeterminate" color="accent"></mat-progress-spinner>
              </div>
            </button>
          </div>
          
          <!-- Wishlist Button -->
          <div class="flex py-2">
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-xl h-10 px-4 flex-1 bg-[#f4f3f1] text-[#171512] text-sm font-bold leading-normal tracking-[0.015em] hover:bg-[#e4e2dd] transition-colors gap-2"
                    (click)="addToWishlist()">
              <svg xmlns="http://www.w3.org/2000/svg" width="16px" height="16px" fill="currentColor" viewBox="0 0 256 256">
                <path d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.61,146.24,196.15,128,206.8Z"></path>
              </svg>
              <span class="truncate">Add to Wishlist</span>
            </button>
          </div>
        </div>

        <!-- Category -->
        <div class="border-t border-[#f3e7e8] pt-4">
          <span class="text-[#994d51] text-sm font-medium">Category: </span>
          <span class="text-[#1b0e0e] font-medium">{{ product.category }}</span>
        </div>
      </div>
    </div>
      </div>
</div>
