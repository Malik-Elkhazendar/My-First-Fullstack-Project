<button 
  [class]="getButtonClasses()"
  [title]="getButtonTitle()"
  [disabled]="isLoading"
  (click)="toggleWishlist($event)">
  
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="wishlist-button__spinner">
    <svg class="animate-spin" width="16" height="16" viewBox="0 0 24 24" fill="none">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" stroke-opacity="0.25"/>
      <path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" stroke-opacity="0.75"/>
    </svg>
  </div>

  <!-- Heart Icon -->
  <div *ngIf="!isLoading" class="wishlist-button__icon">
    <!-- Filled Heart (when in wishlist) -->
    <svg *ngIf="isInWishlist" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256">
      <path d="M240,94c0,70-103.79,126.66-108.21,129a8,8,0,0,1-7.58,0C119.79,220.66,16,164,16,94A62.07,62.07,0,0,1,78,32c20.65,0,38.73,8.88,50,23.89C139.27,40.88,157.35,32,178,32A62.07,62.07,0,0,1,240,94Z"></path>
    </svg>
    
    <!-- Empty Heart (when not in wishlist) -->
    <svg *ngIf="!isInWishlist" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 256 256">
      <path d="M178,32c-20.65,0-38.73,8.88-50,23.89C116.73,40.88,98.65,32,78,32A62.07,62.07,0,0,0,16,94c0,70,103.79,126.66,108.21,129a8,8,0,0,0,7.58,0C136.21,220.66,240,164,240,94A62.07,62.07,0,0,0,178,32ZM128,206.8C109.74,196.16,32,147.69,32,94A46.06,46.06,0,0,1,78,48c19.45,0,35.78,10.36,42.6,27a8,8,0,0,0,14.8,0c6.82-16.67,23.15-27,42.6-27a46.06,46.06,0,0,1,46,46C224,147.69,146.26,196.16,128,206.8Z"></path>
    </svg>
  </div>

  <!-- Button Text (when variant is button or showText is true) -->
  <span *ngIf="(variant === 'button' || showText) && !isLoading" class="wishlist-button__text">
    {{ getButtonText() }}
  </span>
  
  <span *ngIf="(variant === 'button' || showText) && isLoading" class="wishlist-button__text">
    Processing...
  </span>
</button> 